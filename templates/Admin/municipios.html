{%extends 'base.html'%}
{%block title%}Municipios{%endblock%}
{%block content%}
<ul class="nav nav-tabs" id="myTab" role="tablist">
    <!-- Titulos de pestañas de navegación -->
    <li class="nav-item" role="presentation">
      <button class="nav-link active" id="home-tab" data-bs-toggle="tab" data-bs-target="#municipiosR" type="button" role="tab" aria-controls="home-tab-pane" aria-selected="true"><span><i class="fa-solid fa-plus"></i></span>Registrar Municipio</button>
    </li>
    <li class="nav-item" role="presentation">
      <button class="nav-link" id="profile-tab" data-bs-toggle="tab" data-bs-target="#municipiosT" type="button" role="tab" aria-controls="profile-tab-pane" aria-selected="false"><span><i class="fa-solid fa-location-dot"></i></span>Municipios</button>
    </li>
</ul>

<!-- Cuerpo de pestañas de navegación -->
<div class="tab-content" id="myTabContent">
    <div class="tab-pane fade show active" id="municipiosR" role="tabpanel" aria-labelledby="home-tab" tabindex="0">
        <h2 class="titulos">Formulario de Registro</h2>
        <br>
        {%with messages=get_flashed_messages()%}
        {%if messages%}
        {%for message in messages%}   
        <div class="alert alert-success d-flex align-items-center" role="alert">
        <div class="fa-solid fa-triangle-exclamation">
        {{message}}
        </div>
        </div>   
        {%endfor%}
        {%endif%}
        {%endwith%}
        <form action="" method="post" class="container mt-4">
            <div class="mb-3">
                <label for="codmunicipio" class="form-label subtitulo">Código Municipio:</label>
                <input type="text" name="codmunicipio" class="form-control entrada" placeholder="1132" maxlength="4" minlength="4" required>
            </div>
            <div class="mb-3">
                <label for="nombres" class="form-label subtitulo">Nombre del Municipio:</label>
                <input type="text" name="nombres" class="form-control entrada" placeholder="Ejemplo: Cundinamarca" maxlength="20" required>
            </div>
            <button type="submit" class="btn btn-primary">Registrar</button>
        </form>
    </div>

    <div class="tab-pane fade" id="municipiosT" role="tabpanel" aria-labelledby="profile-tab" tabindex="0">
        <h2 class="titulos">Municipios Registrados</h2>
        <a class="PDF" href="/generar_pdf">Descargar PDF</a>
        <table>
            <thead>
                <tr>
                    <th>Código del Municipio</th>
                    <th>Nombre del Municipio</th>

                    <th>Acciones</th>
                </tr>
            </thead>
            <tbody>
                {%for municipio in municipios%}
                <tr>
                <td>{{municipio.0}}</td>
                <td>{{municipio.1}}</td>

                <td>
                    <a class="delete" href="/municipio/edit/{{municipio.0}}"><span class="fa-solid fa-pencil"></span></a>
                    <a class="delete" href="/municipio/borrar/{{municipio.0}}"><span class="fa-solid fa-trash"></span></a>
                </td>
                </tr>
                {%endfor%}
            </tbody>
        </table>
    </div>

    <div class="tab-pane fade" id="municipiosT" role="tabpanel" aria-labelledby="profile-tab" tabindex="0">
        <h2 class="titulos">Municipios Registrados</h2>
    </div>
</div>
{%endblock%}